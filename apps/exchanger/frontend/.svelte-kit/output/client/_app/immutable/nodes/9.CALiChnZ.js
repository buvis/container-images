import{d as Ne,a as u,f as _,s as S,c as Re,e as Be}from"../chunks/BGC_O7Cu.js";import{i as He}from"../chunks/CxezgJRR.js";import{p as ge,t as L,b as _e,H as Ie,c as o,d as p,g as e,r as s,j as N,o as Me,l as O,a as qe,s as l,m as v,k as fe,f as ue,u as c}from"../chunks/D8SkQY_2.js";import{i as Q}from"../chunks/CCe7VU-t.js";import{e as G,i as J,s as U}from"../chunks/BM-OiPN0.js";import{s as le}from"../chunks/1CmXKqvd.js";import{b as De,h as Ee,l as Ge,m as Je,n as Qe}from"../chunks/sCxhiejC.js";import{S as Ue}from"../chunks/BMPKrKFN.js";import{p as Ve}from"../chunks/D5vEBnig.js";var We=_('<span class="ml-1 text-xs text-slate-500"> </span>'),Xe=_('<span class="ml-1 text-xs text-slate-500"> </span>'),Ye=_('<button type="button"> <!></button>'),Ze=_('<div class="flex flex-wrap gap-2"><button type="button">All <!></button> <!></div>');function me(V,C){ge(C,!0);let n=Ve(C,"selected",31,()=>Ie(new Set));function R(a){return typeof a=="string"?a:a.name}function z(a){return typeof a=="string"?void 0:a.count}function b(a){n().has(a)?n().delete(a):n().add(a),n(new Set(n()))}function T(){n(new Set)}let x=N(()=>C.options.reduce((a,d)=>a+(z(d)??0),0)),y=N(()=>C.options.some(a=>z(a)!==void 0));var m=Ze(),w=o(m);w.__click=T;var h=p(o(w));{var B=a=>{var d=We(),F=o(d);s(d),L(()=>S(F,`(${e(x)??""})`)),u(a,d)};Q(h,a=>{e(y)&&a(B)})}s(w);var f=p(w,2);G(f,17,()=>C.options,J,(a,d)=>{const F=N(()=>R(e(d))),H=N(()=>z(e(d)));var $=Ye();$.__click=()=>b(e(F));var A=o($),I=p(A);{var M=k=>{var P=Xe(),q=o(P);s(P),L(()=>S(q,`(${e(H)??""})`)),u(k,P)};Q(I,k=>{e(H)!==void 0&&k(M)})}s($),L(k=>{U($,1,`px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors ${k??""}`),S(A,`${e(F)??""} `)},[()=>n().has(e(F))?"bg-slate-700 border-slate-600 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600"]),u(a,$)}),s(m),L(()=>U(w,1,`px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors ${n().size===0?"bg-slate-700 border-slate-600 text-white":"bg-slate-900 border-slate-700 text-slate-400 hover:text-slate-200 hover:border-slate-600"}`)),u(V,m),_e()}Ne(["click"]);var et=_('<div class="bg-slate-900 p-4 rounded-lg border border-slate-800 animate-pulse h-20"></div>'),tt=_('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>'),rt=_('<div class="text-center py-12 text-slate-500">No symbols found matching your criteria.</div>'),at=_('<div class="bg-slate-900 p-4 rounded-lg border border-slate-800 hover:border-slate-700 transition-colors flex items-start justify-between gap-3"><div class="min-w-0 flex-1"><div class="flex items-center gap-2"><span class="font-mono font-bold text-white"> </span> <span> </span></div> <p class="text-sm text-slate-400 truncate"> </p></div> <button class="p-1.5 rounded hover:bg-slate-800 transition-colors flex-shrink-0 cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg></button></div>'),st=_('<section><h2 class="text-lg font-semibold text-slate-400 mb-3 uppercase tracking-wide"> <span class="text-slate-600 font-normal text-sm ml-2"> </span></h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"></div></section>'),ot=_('<div class="space-y-8"></div> <div class="mt-6 text-sm text-slate-500 text-center"> </div>',1),it=_('<div class="bg-slate-950 text-slate-200 p-6"><header class="mb-6"><h1 class="text-3xl font-bold text-white mb-4">Symbols</h1> <div class="flex flex-col gap-4"><!> <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center"><!> <div class="hidden sm:block w-px h-6 bg-slate-800"></div> <div class="flex-1"><!></div></div></div></header> <!></div>');function gt(V,C){ge(C,!1);const n=v(),R=v(),z=v(),b=v(),T=v(),x=v();let y=v([]),m=v([]),w=v([]),h=v(new Set),B=v(!0),f=v(""),a=v(new Set);Me(async()=>{try{await(async t=>{var r=fe(t,3);l(y,r[0]),l(m,r[1]),l(w,r[2])})(await Promise.all([De(),Ee(),Ge()]))}catch(t){console.error("Failed to load symbols",t)}finally{l(B,!1)}});function d(t){return`${t.provider}:${t.provider_symbol}`}async function F(t){try{e(x).has(d(t))?(await Je(t.provider,t.provider_symbol),l(m,e(m).filter(r=>!(r.provider===t.provider&&r.provider_symbol===t.provider_symbol)))):(await Qe(t.provider,t.provider_symbol),l(m,[...e(m),{provider:t.provider,provider_symbol:t.provider_symbol}]))}catch(r){console.error("Failed to toggle favorite",r)}}function H(t){return t==="crypto"?"text-amber-400":"text-cyan-400"}O(()=>(e(y),e(f)),()=>{l(n,e(y).filter(t=>!e(f)||t.symbol.toLowerCase().includes(e(f).toLowerCase())||t.name.toLowerCase().includes(e(f).toLowerCase())))}),O(()=>(e(n),e(h)),()=>{l(R,(()=>{const t=e(n).filter(r=>e(h).size===0||e(h).has(r.provider));return[{name:"forex",count:t.filter(r=>r.type==="forex").length},{name:"crypto",count:t.filter(r=>r.type==="crypto").length}]})())}),O(()=>(e(n),e(a),e(w)),()=>{l(z,(()=>{const t=e(n).filter(r=>e(a).size===0||e(a).has(r.type));return e(w).map(r=>({name:r.name,count:t.filter(g=>g.provider===r.name).length}))})())}),O(()=>(e(y),e(h),e(a),e(f)),()=>{l(b,e(y).filter(t=>{const r=e(h).size===0||e(h).has(t.provider),g=e(a).size===0||e(a).has(t.type),D=!e(f)||t.symbol.toLowerCase().includes(e(f).toLowerCase())||t.name.toLowerCase().includes(e(f).toLowerCase());return r&&g&&D}))}),O(()=>e(b),()=>{l(T,e(b).reduce((t,r)=>{const g=r.provider;return t[g]||(t[g]=[]),t[g].push(r),t},{}))}),O(()=>e(m),()=>{l(x,new Set(e(m).map(t=>`${t.provider}:${t.provider_symbol}`)))}),qe(),He();var $=it(),A=o($),I=p(o(A),2),M=o(I);Ue(M,{placeholder:"Search symbols...",get value(){return e(f)},set value(t){l(f,t)},$$legacy:!0});var k=p(M,2),P=o(k);me(P,{get options(){return e(R)},get selected(){return e(a)},set selected(t){l(a,t)},$$legacy:!0});var q=p(P,4),xe=o(q);me(xe,{get options(){return e(z)},get selected(){return e(h)},set selected(t){l(h,t)},$$legacy:!0}),s(q),s(k),s(I),s(A);var he=p(A,2);{var be=t=>{var r=tt();G(r,4,()=>Array(9),J,(g,D)=>{var W=et();u(g,W)}),s(r),u(t,r)},ye=t=>{var r=Re(),g=ue(r);{var D=j=>{var E=rt();u(j,E)},W=j=>{var E=ot(),X=ue(E);G(X,5,()=>(e(T),c(()=>Object.entries(e(T)))),J,($e,Se)=>{var de=N(()=>fe(e(Se),2));let ke=()=>e(de)[0],Y=()=>e(de)[1];var Z=st(),ee=o(Z),ve=o(ee),ce=p(ve),Ce=o(ce);s(ce),s(ee);var pe=p(ee,2);G(pe,5,Y,J,(Fe,i)=>{var te=at(),re=o(te),ae=o(re),se=o(ae),Le=o(se,!0);s(se);var oe=p(se,2),ze=o(oe,!0);s(oe),s(ae);var ie=p(ae,2),Ae=o(ie,!0);s(ie),s(re);var K=p(re,2),Pe=o(K);s(K),s(te),L((je,Oe,Te,Ke)=>{S(Le,(e(i),c(()=>e(i).symbol))),U(oe,1,`text-xs ${je??""}`),S(ze,(e(i),c(()=>e(i).type))),le(ie,"title",(e(i),c(()=>e(i).name))),S(Ae,(e(i),c(()=>e(i).name))),le(K,"title",Oe),le(K,"aria-label",Te),U(Pe,0,`h-5 w-5 ${Ke??""}`)},[()=>(e(i),c(()=>H(e(i).type))),()=>(e(x),e(i),c(()=>e(x).has(d(e(i)))?"Remove from favorites":"Add to favorites")),()=>(e(x),e(i),c(()=>e(x).has(d(e(i)))?"Remove from favorites":"Add to favorites")),()=>(e(x),e(i),c(()=>e(x).has(d(e(i)))?"text-yellow-400 fill-yellow-400":"text-slate-600"))]),Be("click",K,()=>F(e(i))),u(Fe,te)}),s(pe),s(Z),L(()=>{S(ve,`${ke()??""} `),S(Ce,`(${Y(),c(()=>Y().length)??""})`)}),u($e,Z)}),s(X);var ne=p(X,2),we=o(ne);s(ne),L(()=>S(we,`Showing ${e(b),c(()=>e(b).length)??""} of ${e(y),c(()=>e(y).length)??""} symbols`)),u(j,E)};Q(g,j=>{e(b),c(()=>e(b).length===0)?j(D):j(W,!1)},!0)}u(t,r)};Q(he,t=>{e(B)?t(be):t(ye,!1)})}s($),u(V,$),_e()}export{gt as component};
